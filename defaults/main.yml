---
service_env: 'dev'
service_state: 'present'

vpc_cidr: '10.1.0.0/16'
vpc_region: 'us-east-1'

manage_vpc: true
vpc_id: ''                        # must be set when manage_vpc == false
vpc_public_subnets: []            #            ^ ditto ^
### only required when also managing vpc w/ this role
vpc_name: 'asgwebtest'
vpc_public_subnet_cidrs:
  - '10.1.1.0/24'
  - '10.1.2.0/24'
vpc_public_subnet_azs:
  '10.1.1.0/24': 'a'
  '10.1.2.0/24': 'b'
###

ec2_cluster_name: 'asgwebtest'
ec2_ami: 'ami-b63769a1'            # RHEL 7.3 in us-east-1
ec2_instance_type: 't2.micro'
ec2_assign_public_ip: 'yes'
ec2_host_port: 80                  # mostly used to inform defaults

manage_ec2_keypair: true           # set to false to prevent create/delete of key
ec2_key_name: 'asgwebtest'

asg_health_check_period: 60
asg_health_check_type: 'ELB'
asg_max_size: 1
asg_min_size: 1
asg_desired_capacity: 1

# note that these certs are stored in IAM
manage_elb: true
manage_cert: true                 # creates a new ssl certificate for the elb if true
elb_cert_domain: 'example.com'    # common name, used only when generating certs
elb_cert_arn: ''                  # must be set if manage_cert == false
elb_host_port: '{{ec2_host_port}}'

elb_health_check:
  ping_protocol: tcp
  ping_port: '{{ec2_host_port}}'
  # ping_path: "/" # only required for http/https
  response_timeout: 5
  interval: 30
  unhealthy_threshold: 2
  healthy_threshold: 10

# security group rules
instance_sg_rules:
  - proto: tcp
    from_port: '{{ec2_host_port}}'
    to_port:  '{{ec2_host_port}}'
    cidr_ip: '{{vpc_cidr}}'
  - proto: tcp
    from_port: 22
    to_port: 22
    cidr_ip: '{{vpc_cidr}}'
